import GitHubEmbed from "@site/src/components/GitHubEmbed";


## Setup

To use Statsig in React, you first must create an instance of the Statsig client and then pass it as a Prop to a StatsigProvider.

This will set your client as part of the [StatsigContext](https://github.com/statsig-io/js-client-monorepo/blob/main/packages/react-bindings/src/StatsigContext.ts) and make it available to all Statsig [hooks](#hooks).

### Initialize
Call `StatsigClient.initializeAsync` and wait for the result to get the most up to date values from the network.

```js
function Content() {
  const gate = useFeatureGate('a_gate');

  return <div>a_gate: {gate.value ? 'Passing' : 'Failing'}</div>;
}

function useAsyncClient(): { isLoading: boolean; client: StatsigClient } {
  const [isLoading, setIsLoading] = useState(true);

  const client = useMemo(() => {
    const instance = new StatsigClient(DEMO_CLIENT_KEY, { userID: 'a-user' });

    instance
      .initializeAsync()
      .then(() => {
        setIsLoading(false);
      })
      .catch((err) => {
        console.error(err);
      });

    return instance;
  }, []);

  return { client, isLoading };
}

export default function AsyncInitializeExample(): JSX.Element {
  const { client, isLoading } = useAsyncClient();

  if (isLoading) {
    return <div>Statsig Loading...</div>;
  }

  return (
    <StatsigProvider client={client}>
      <Content />
    </StatsigProvider>
  );
}
```
